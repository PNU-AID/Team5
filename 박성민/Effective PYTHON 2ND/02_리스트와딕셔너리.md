# Chapter 2 - 리스트와 딕셔너리
## 시퀀스 슬라이싱
시퀀스를 여러 조각으로 나누는 방법. 어떤 파이썬 클래스에도 `__getitem__`과 `__setitem__` 특별 메서드를 구현하여 슬라이싱을 추가할 수 있다. 

스라이싱의 구문의 기본 형태는 `리스트[시작:끝]`이다. 시작 인덱스 원소는 포함, 끝 인덱스는 포함하지 않는다.
```python
a = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
print('가운데 2개:', a[3:5])
print('마지막을 제외한 나머지:', a[1:7])
```
```console
>>>
가운데 2개: ['d', 'e']
마지막을 제외한 나머지: ['b', 'c', 'd', 'e', 'f', 'g']
```

리스트의 맨 앞부터 슬라이싱 시, 0을 생략할 수 있다. 또한 리스트의 끝까지 슬라이싱 시, 끝 인덱스를 생략할 수 있다.
```python
assert a[:5] == a[0:5]
assert a[5:] == a[5:len(a)]
```

리스트의 끝에서부터 원소를 찾고 싶을 땐 음수 인덱스를 사용하면 된다.

슬라이싱할 때 리스트의 인덱스 범위를 넘어가는 시작과 끝 인덱스는 무시된다. 하지만 범위를 넘어가는 인덱스에 직접 접근하면 예외가 발생한다.

리스트 슬라이싱의 결과는 완전히 새로운 리스트가 만들어지며, 결과로 얻은 리스트를 변경해도 원래 리스트는 바뀌지 않는다.
```python
b = a[3:]
print('이전:', b)
b[1] = 99
print('이후:', b)
print('변화 없음:', a)
```
```console
>>>
이전: ['d', 'e', 'f', 'g', 'h']
이후: ['d', 99, 'f', 'g', 'h']
변화 없음: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
```

언패킹 대입과 달리 슬라이스 대입은 슬라이스와 대입되는 리스트의 길이가 같을 필요없다. 
```python
print('이전:', a)
a[2:7] = [99, 22, 14]
print('이후:', a)
```
```console
이전: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
이후: ['a', 'b', 99, 22, 14, 'h']
```
위는 리스트 길이가 줄어드는 예시이고, 반대의 경우도 성립한다.

슬라이싱에서 시작과 끝 인덱스를 모두 생략하면 원래 리스트를 복사한 새 리스트를 얻는다. 
```python
b = a[:] # a와 b는 내용은 같지만 다른 리스트 객체
assert b == a and b is not a
```

시작과 끝 인덱스가 없는 슬라이스에 대입하면 슬라이스가 참조하는 리스트의 내용을 대입하는 리스트의 복사본으로 덮어 쓴다.
```python
b = a # a와 b는 같은 리스트 객체
a[:] = [101, 102, 103] # b의 내용도 바뀜
```


## 스트라이드(stride)와 슬라이스(slice)를 함께 사용하지 말자
파이썬은 기본 슬라이싱 외에 `리스트[시작:끝:증가값]`으로 일정한 간격을 두고 슬라이싱할 수 있는 구문을 제공한다. 이를 스트라이드(stride)라고 하며, 이를 사용해 시퀀스를 슬라이싱하면서 매 n번째 원소만 가져올 수 있다. 
```python
x = ['빨강', '주황', '노랑', '초록', '파랑', '자주']
odds = x[::2]
evens = x[1::2]
print(odds)
print(evens)
```
```console
>>>
['빨강', '노랑', '파랑']
['주황', '초록', '자주']
```

스트라이드를 음수로 지정하면 문자열을 역으로 슬라이싱한다. 바이트 문자열과 유니코드 문자열에서 이 기법은 잘 작동하지만, 유니코드 데이터를 utf-8로 인코딩한 문자열에는 작동하지 않는다.
```python
x = b'mongoose'       # 바이트 문자열
y = x[::-1]
print(y)              # b'esoognom'

x = '寿司'            # 유니코드 문자열
y = x[::-1]
print(y)              # 司寿

w = '寿司'            # 유니코드 문자열
x = w.encode('utf-8') # utf-8로 인코딩한 유니코드 문자열
y = x[::-1]
z = y.decode('utf-8') # error

# 1바이트로 인코딩되는 아스키 코드로 이뤄진 문자열은 디코딩된다.
```
---
```python
x[-2:2:-2]
x[2:2:-2]
```
위 코드와 같이 스라이싱 구문에 스트라이드까지 들어가면 코드를 이해하기 어려워진다. 따라서, 시작값이나 끝값을 증가값과 함께 사용하지 않는 것을 권장한다. 시작이나 끝 인덱스와 함께 증가값을 사용해야 한다면, 스트라이딩한 결과를 변수에 대입한 다음 슬라이싱하는 것이 좋다.
```python
x = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']

x[2:-2:2]   # 권장x

y = x[::2]  # ['a', 'c', 'e', 'g']
z = y[1:-1] # ['c', 'e']
```